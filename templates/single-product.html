{% extends 'layouts/base.html' %}
{% load static %}
{% load ratings %}
{% load new_tags %}
{% block content %}
<style>
    @import url(//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css);

fieldset, label { margin: 0; padding: 0; }
body{ margin: 20px; }
h1 { font-size: 1.5em; margin: 10px; }

/****** Style Star Rating Widget *****/

.rating2 {
  border: none;
  float: left;
}

.rating2 > input { display: none; }
.rating2 > label:before {
  margin: 5px;
  font-size: 1.25em;
  font-family: FontAwesome;
  display: inline-block;
  content: "\f005";
}

.rating2 > .half:before {
  content: "\f089";
  position: absolute;
}

.rating2 > label {
  color: #ddd;
 float: right;
}

/***** CSS Magic to Highlight Stars on Hover *****/

.rating2 > input:checked ~ label, /* show gold star when clicked */
.rating2:not(:checked) > label:hover, /* hover current star */
.rating2:not(:checked) > label:hover ~ label { color: #FFD700;  } /* hover previous stars in list */

.rating2 > input:checked + label:hover, /* hover current star when changing rating */
.rating2 > input:checked ~ label:hover,
.rating2 > label:hover ~ input:checked ~ label, /* lighten current selection */
.rating2 > input:checked ~ label:hover ~ label { color: #FFED85;  }
</style>
<main class="main">
    <div class="container">
        <div class="path">
            <ul class="path_list">
                <li class="path_item"><a href="#">{{ object.category }}</a></li>
                >
                {% if object.subcategory %}
                     <li class="path_item"><a href="#">{{ object.subcategory }}</a></li>
                     >
                {% endif %}

                <li class="path_item path_item_current"><a href="#">{{ object.title }}</a></li>
            </ul>
        </div>
        <div id="product">
            <div class="main__content">
                <div class="prod">
                    <div class="prod__title">
                        {% if object.is_discount %}
                        <div class="prod__discount">-{{ object.discount }}%</div>
                        {% endif %}
                        <h2 class="section_title">{{ product.title }}</h2>
                    </div>
                    <div class="prod__top">
                        <div class="prod__top_info">
                            <div class="info">Производитель: <span>{{ object.country }}</span></div>
                            <div class="info">Артикул товара: <span>{{ object.pk }}</span></div>
                        </div>
                    </div>

                    <div class="prod__content">
                        <div class="prod__content_gallery">
                            {% if object.is_published == True %}
                            <div class="prod__cond prod__cond_present">В наличии</div>
                            {% else %}
                            <button disabled class="btn btn_dis">Нет в наличии</button>
                            {% endif %}

                            <div class="prod__content_gallery_body carousel" id="mainCarousel">
                                {% for i in object.images.all %}
                                <div class="prod__slide carousel__slide" data-fancybox="gallery"
                                     data-src="{{ i.image.url }}">
                                    <picture>
                                        <source type="image/webp" srcset="">
                                        <img src="{{ i.image.url }}" alt="Iphone 13 Pro">
                                    </picture>
                                </div>
                                {% endfor %}
                            </div>

                            <div class="prod__content_gallery_thumbs carousel" id="thumbCarousel">
                                {% for i in object.images.all %}
                                <div class="prod__thumb carousel__slide">
                                    <picture>
                                        <source type="image/webp" srcset="">
                                        <img class="panzoom__content" src="{{ i.image.url }}" alt="Iphone 13 Pro">
                                    </picture>
                                </div>
                                {% endfor %}
                            </div>

                            <div class="prod__title">
                                {% if object.is_discount %}
                                <div class="prod__discount">-{{ object.discount }}%</div>
                                {% endif %}
                                <h2 class="section_title">{{ object.title}}</h2>
                            </div>

                        </div>
                        <div class="prod__content_main">
                            <form class="prod__content_form">
                                <div class="custom">

                                    <div class="custom__cond">
                                        <h3 class="form__name">Состояние товара:</h3>
                                        <div class="custom__cond_inputs">
                                            <div class="custom__cond_item">
                                                <input id="new" type="radio" name="condition">
                                                <label for="new">Новые</label>
                                            </div>
                                            <div class="custom__cond_item">
                                                <input id="old" type="radio" name="condition">
                                                <label for="old">Уцененные</label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="custom__space">
                                        <h3 class="form__name">Встроенная память, ГБ:</h3>
                                        <div class="custom__space_inputs">
                                            <div class="custom__space_item">
                                                <input id="low" type="radio" name="space">
                                                <label for="low">128</label>
                                            </div>
                                            <div class="custom__space_item">
                                                <input id="mid" type="radio" name="space">
                                                <label for="mid">256</label>
                                            </div>
                                            <div class="custom__space_item">
                                                <input id="high" type="radio" name="space">
                                                <label for="high">512</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="custom__color">
                                        <h3 class="form__name">Цвет:</h3>
                                          <div class="custom__color_inputs">
                                            {% for color in object.colors.all|slice:':4' %}
                                                <div class="custom__color_item">
                                                    <input id="{{ color.pk }}" type="radio" name="color">
                                                    <label for="{{ color.pk }}">
                                                        <div style="background-color: {{ color.code }};"></div>
                                                    </label>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <ul class="custom__descr">
                                        {% for i in object.characteristics.all %}
                                            <li class="custom__descr_item"><span class="name">{{ i.data }}</span>
                                                <span class="value">{{ i.number }}</span></li>
                                        {% endfor %}
                                    </ul>
                                    <a href="#descr" class="custom__link">Перейти к описанию</a>
                                    <!--                                            <div class="custom__ex">-->
                                    <!--                                                <svg width="31" height="38" viewBox="0 0 31 38" fill="none" xmlns="http://www.w3.org/2000/svg">-->
                                    <!--                                                    <path d="M21.0458 6.07608C22.2218 4.65506 23.0548 2.71954 23.0548 0.75951C23.0548 0.490006 23.0303 0.220503 22.9813 0C21.0703 0.073501 18.7672 1.27402 17.3952 2.89104C16.3172 4.11605 15.3127 6.07608 15.3127 8.03611C15.3127 8.33011 15.3617 8.62411 15.3862 8.72211C15.5087 8.74661 15.7047 8.77112 15.9007 8.77112C17.6157 8.77112 19.7718 7.6196 21.0458 6.07608ZM22.3933 9.18762C19.5268 9.18762 17.1992 10.9271 15.7047 10.9271C14.1122 10.9271 12.0297 9.28562 9.53063 9.28562C4.80206 9.28562 0 13.2057 0 20.5803C0 25.1863 1.76402 30.0374 3.96905 33.1734C5.85558 35.8195 7.4971 38 9.87363 38C12.2257 38 13.2547 36.432 16.1702 36.432C19.1348 36.432 19.7963 37.951 22.3933 37.951C24.9658 37.951 26.6809 35.599 28.2979 33.2714C30.1109 30.6009 30.8704 28.0039 30.8949 27.8814C30.7479 27.8324 25.8233 25.8233 25.8233 20.1883C25.8233 15.3127 29.6944 13.1322 29.9149 12.9607C27.3669 9.28562 23.4713 9.18762 22.3933 9.18762Z" fill="#242424"/>-->
                                    <!--                                                    </svg>-->

                                    <!--                                                Только оригинальные товары бренда-->
                                    <!--                                            </div>-->
                                </div>

                                <div class="order">
                                    <div class="order__price">
                                        <div class="order__price_item">
                                            <div class="new">{{ object.real_price }} ₽</div>
                                            {% if object.is_discount %}
                                            <div class="old">{{ object.price }} ₽</div>
                                            {% endif %}
                                        </div>
{#                                         {% if object.is_published == True %}#}
{#                                             <a onclick="add_to_object(this, {{ object.pk }})" style="width: 100%">#}
{#                                                     {% if object|in_cart:request %}#}
{#                                                          <button type="submit" class="order__price_add btn orange-1">Добавлено в корзину</button>#}
{#                                                      {% else %}#}
{#                                                           <button type="submit" class="order__price_add btn">Добавить в корзину</button>#}
{#                                                      {% endif %}#}
{#                                                </a>#}
{#                                            {% else %}#}
{#                                                  <button disabled class="btn btn_dis">Нет в наличии</button>#}
{#                                            {% endif %}#}
                                            <p>{{ product.id }}</p>
                                            <p>{{ cart }}</p>
                                           <form action="{% url "cart:cart_add" product.id %}" method="post">
                                                <p>{{ cart_product_form }}</p>
                                                {% csrf_token %}
                                                <input class="btn" type="submit" value="Add to cart">
                                            </form>


                                        <div class="order__price_delinfo">Стандартная доставка</div>
                                    </div>

                                    <div class="order__buy">
                                        <a href="{% url 'product:create-carts' pk=object.pk %}">
                                                 <button type="submit">Купить в один клик</button>
                                        </a>
                                    </div>
                                    <div class="order__info">
                                        <h3 class="order__info_title">Информация о доставке</h3>
                                        <ul class="order__info_list">
                                            <li class="order__info_list_item order__info_list_item_city">Москва</li>
                                            <li class="order__info_list_item order__info_list_item_count">В наличии —
                                                осталась одна штука!
                                            </li>
                                            <li class="order__info_list_item order__info_list_item_date">Срок доставки
                                                уточним при оформлении заказа
                                            </li>
                                        </ul>
                                    </div>

                                    <div class="order__faq">
                                        <h3 class="order__faq_title">Часто задаваемые вопросы</h3>
                                        <ul class="order__faq_list">
                                            <li class="order__faq_list_item"><a href="./articles.html">Условия
                                                доставки</a></li>
                                            <li class="order__faq_list_item"><a href="./articles.html">Возврат
                                                товаров</a></li>
                                            <li class="order__faq_list_item"><a href="./articles.html">Способы
                                                оплаты</a></li>
                                            <li class="order__faq_list_item"><a href="./articles.html">Возврат денег</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>


                </div>
            </div>
        </div>
        <section class="reviews">
            <h2 class="section_title">
                Отзывы и вопросы о товаре
            </h2>
              {% if object.is_buy == True %}
                <div class="reviews__add">
                    <button class="btn" data-micromodal-trigger="review">Оставить отзыв</button>
                </div>
              {% else %}
                 <div class="reviews__add">
                    <button class="btn" data-micromodal-trigger="dont-review">Оставить отзыв</button>
                </div>
              {% endif %}
            <div class="reviews__content">
                <h3 class="reviews__content_title">Фото и видео покупателей </h3>

                <div class="reviews__content_list carousel" id="productReviews">
                       {% for review in product.reviewmodel_set.all %}
                            <div class="reviews__content_list_item carousel__slide" style="padding: 0px">
                                <img src="{{ review.image.url }}" style="width: 145px;height: 168px" alt="">
                            </div>
                       {% endfor %}
                </div>
            </div>

            <div class="reviews__body">
                <div class="reviews__body_filter">
                    <!-- <div class="reviews__body_filter_item dropdown">
                        <div class="reviews__body_filter_item_head dropdown_head" data-drophead>
                            Сначала полезные
                            <svg data-drophead width="6" height="4" viewBox="0 0 6 4" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path data-drophead d="M1.28101 4.00073C0.77231 4.00073 0.494417 3.40742 0.820081 3.01662L2.87239 0.553851C3.11227 0.265999 3.55438 0.265998 3.79426 0.553851L5.84656 3.01662C6.17223 3.40742 5.89433 4.00073 5.38563 4.00073L1.28101 4.00073Z" fill="#3D5165"/>
                                </svg>
                        </div>
                        <div class="reviews__body_filter_item_list dropdown_list">
                            <div class="reviews__body_filter_item_list_item dropdown_item">Сначала полезные</div>
                            <div class="reviews__body_filter_item_list_item dropdown_item">Сначала полезные</div>
                            <div class="reviews__body_filter_item_list_item dropdown_item">Сначала полезные</div>
                        </div>
                    </div> -->
                    <div class="reviews__body_filter_drop">
                        <select class="reviews__body_filter_drop_select">
                            <option value="Сначала полезные">Сначала полезные</option>
                            <option value="Сначала старые">Сначала старые</option>
                            <option value="Сначала новые">Сначала новые</option>
                        </select>
                    </div>
                    <div class="reviews__body_filter_item">
                        <input id="withPhoto" type="checkbox">
                        <label for="withPhoto">Только с фото</label>
                    </div>
                </div>
                <div class="reviews__body_list">
                    {% for review in product.reviewmodel_set.all %}
                         <div class="reviews__body_item">
                        <div class="reviews__body_item_head">
                            <div class="profile">
                                <div class="profile__img">
                                    <picture>
                                        <source srcset="" type="image/webp">
                                        <img src="" alt="">
                                    </picture>
                                </div>
                                <div class="profile__descr">
                                    <div class="profile__descr_name">{{ review.name }}</div>
<!--                                    <div class="profile__descr_name">{{ review.rating }}</div>-->
                                    <div class="profile__descr_rate">
                                        {% for star in review.rating_range %}
                                            <img src="/static/img/Icon.svg" alt="">
                                        {% endfor %}
<!--                                  <svg width="11" height="10" viewBox="0 0 11 10" fill=""-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"-->
<!--                                                  fill="#0047FF"/>-->
<!--                                        </svg>-->
<!--                                        <svg width="11" height="10" viewBox="0 0 11 10" fill="none"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"-->
<!--                                                  fill="#0047FF"/>-->
<!--                                        </svg>-->
<!--                                        <svg width="11" height="10" viewBox="0 0 11 10" fill="none"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"-->
<!--                                                  fill="#0047FF"/>-->
<!--                                        </svg>-->
<!--                                        <svg width="11" height="10" viewBox="0 0 11 10" fill="none"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"-->
<!--                                                  fill="#0047FF"/>-->
<!--                                        </svg>-->
<!--                                        <svg width="11" height="10" viewBox="0 0 11 10" fill="none"-->
<!--                                             xmlns="http://www.w3.org/2000/svg">-->
<!--                                            <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"-->
<!--                                                  fill="#0047FF"/>-->
<!--                                        </svg>-->
                                    </div>
                                </div>
                            </div>
                            <div class="date">
                                 <p>{{ review.created_at }}</p>
                            </div>
                        </div>
                        <ul class="reviews__body_item_list">
                            <!--                                    <li class="reviews__body_item_list_item">-->
                            <!--                                        <span class="name">Скорость работы:</span>-->
                            <!--                                        <span class="value">Очень высокая</span>-->
                            <!--                                    </li>-->
                        </ul>
                        <div class="reviews__body_item_text">
                            <p>
                                 {{ review.comments }}
                            </p>
                        </div>

                        <div class="reviews__body_item_content carousel">
                            <div class="reviews__body_item_content_item carousel__slide" style="padding: 0px"><img src="{{ review.image.url }}" style="width: 145px;height: 168px" alt=""></div>
                        </div>

                        <form class="reviews__body_item_question">
                            <div class="reviews__body_item_question_title">Вам помог этот отзыв?</div>
                            <div class="reviews__body_item_questions">
                                <div class="item">
                                    <input id="yes" type="radio" name="help">
                                    <label for="yes">Да</label>
                                </div>
                                <div class="item">
                                    <input id="no" type="radio" name="help">
                                    <label for="no">Нет</label>
                                </div>
                            </div>
                        </form>

                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        <div class="descr" id="descr">
            <h3 class="descr__title section_title">
                Описание товара
            </h3>
            <div class="descr__text">
                {{ object.description|safe }}
            </div>
        </div>

        <section class="pop">
            <div class="section__top">
                <h2 class="section_title">Рекомендуем также</h2>
                <a href="./positions.html" class="section__top_link">Показать все</a>
            </div>

            <div class="product_list">
                <div class="product">
                    <a href="./product.html" class="product_img">
                        <picture>
                            <source type="image/webp">
                            <img src="{% static './img/iphone.png' %}" alt="Product">
                        </picture>
                    </a>
                    <div class="product_rate">
                    </div>
                    <a href="./product.html" class="product_name">Смартфон Apple iPhone 12 64GB, белый</a>
                    <div class="product_price">
                        <div class="actual">89 990₽</div>
                        <div class="old">99 990₽</div>
                    </div>
                    <div class="product_btn">
                        <button class="btn">В корзину</button>
                        <div class="fav">
                            <svg width="10" height="12" viewBox="0 0 10 12" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 1.167C0 0.522484 0.522483 0 1.167 0H8.169C8.81351 0 9.336 0.522483 9.336 1.167V11.0865C9.336 11.3051 9.21384 11.5053 9.0195 11.6053C8.82515 11.7053 8.59121 11.6884 8.41335 11.5613L4.668 8.88606L0.922652 11.5613C0.744793 11.6884 0.510848 11.7053 0.316501 11.6053C0.122154 11.5053 0 11.3051 0 11.0865V1.167ZM8.169 1.167L1.167 1.167V9.95265L4.32885 7.69419C4.53173 7.54927 4.80427 7.54927 5.00715 7.69419L8.169 9.95265V1.167Z"
                                      fill="#242424"/>
                            </svg>

                        </div>
                    </div>
                    <div class="product_ex">-19%</div>
                </div>
                <div class="product">
                    <a href="./product.html" class="product_img">
                        <picture>
                            <source type="image/webp">
                            <img src="{% static './img/iphone.png' %}" alt="Product">
                        </picture>
                    </a>
                    <div class="product_rate">
                        <div class="rating">
                            <svg width="11" height="10" viewBox="0 0 11 10" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"
                                      fill="#0047FF"/>
                            </svg>
                            <svg width="11" height="10" viewBox="0 0 11 10" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"
                                      fill="#0047FF"/>
                            </svg>
                            <svg width="11" height="10" viewBox="0 0 11 10" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"
                                      fill="#0047FF"/>
                            </svg>
                            <svg width="11" height="10" viewBox="0 0 11 10" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"
                                      fill="#0047FF"/>
                            </svg>
                            <svg width="11" height="10" viewBox="0 0 11 10" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.66261 0C5.86126 0 6.04287 0.112043 6.13171 0.289417L7.48425 2.98984L10.4583 3.42168C10.6558 3.45036 10.8199 3.58849 10.8816 3.77801C10.9433 3.96752 10.8918 4.17555 10.7489 4.31466L8.58439 6.42144L9.0713 9.39189C9.10348 9.5882 9.02144 9.78577 8.85955 9.90177C8.69767 10.0178 8.48392 10.0322 8.3079 9.93892L5.66261 8.53772L3.01733 9.93892C2.8413 10.0322 2.62755 10.0178 2.46567 9.90177C2.30379 9.78577 2.22174 9.5882 2.25392 9.39189L2.74084 6.42144L0.576304 4.31466C0.433385 4.17555 0.381956 3.96752 0.443636 3.77801C0.505317 3.58849 0.669412 3.45036 0.866942 3.42168L3.84097 2.98984L5.19352 0.289417C5.28236 0.112043 5.46396 0 5.66261 0ZM5.66261 1.69428L4.65665 3.70273C4.5799 3.85597 4.43289 3.96203 4.26305 3.98669L2.06919 4.30525L3.66865 5.86204C3.79121 5.98133 3.84775 6.15282 3.8201 6.32146L3.45987 8.51912L5.41679 7.48254C5.57052 7.40111 5.7547 7.40111 5.90844 7.48254L7.86536 8.51912L7.50512 6.32146C7.47748 6.15282 7.53401 5.98133 7.65657 5.86204L9.25604 4.30525L7.06218 3.98669C6.89234 3.96203 6.74533 3.85597 6.66857 3.70273L5.66261 1.69428Z"
                                      fill="#0047FF"/>
                            </svg>


                        </div>
                        <div class="info">
                            4
                            <span>(13)</span>
                        </div>
                    </div>
                    <a href="./product.html" class="product_name">Смартфон Apple iPhone 12 64GB, белый</a>
                    <div class="product_price">
                        <div class="actual">89 990₽</div>
                        <div class="old">99 990₽</div>
                    </div>
                    <div class="product_btn">
                        <button class="btn">В корзину</button>
                        <div class="fav">
                            <svg width="10" height="12" viewBox="0 0 10 12" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 1.167C0 0.522484 0.522483 0 1.167 0H8.169C8.81351 0 9.336 0.522483 9.336 1.167V11.0865C9.336 11.3051 9.21384 11.5053 9.0195 11.6053C8.82515 11.7053 8.59121 11.6884 8.41335 11.5613L4.668 8.88606L0.922652 11.5613C0.744793 11.6884 0.510848 11.7053 0.316501 11.6053C0.122154 11.5053 0 11.3051 0 11.0865V1.167ZM8.169 1.167L1.167 1.167V9.95265L4.32885 7.69419C4.53173 7.54927 4.80427 7.54927 5.00715 7.69419L8.169 9.95265V1.167Z"
                                      fill="#242424"/>
                            </svg>

                        </div>
                    </div>
                    <div class="product_ex">-19%</div>
                </div>


            </div>
        </section>

        <section class="reg">
            <div class="mainform">
                <h2 class="section_title">Узнавайте об новых акциях</h2>
                <div class="mainform_subtitle">Подпишитесь и получайте промокоды, акции и подборки товаров на свою
                    почту.
                </div>
                <form class="mainform_body">
                    <input type="email" placeholder="Ваш e-mail ">
                    <button class="btn" type="submit">Подписаться</button>
                </form>
                <div class="mainform_info">
                    Нажимая на кнопку я подтверждаю обработку <a href="#">персональных данных</a>
                </div>
            </div>

        </section>
    </div>
</main>
  <form action="{% url "cart:cart_add" product.id %}" method="post">
                                                <p>{{ cart_product_form }}</p>
                                                {% csrf_token %}
                                                <input class="btn" type="submit" value="Add to cart">
                                            </form>
<div class="popup" id="login" aria-hidden="true">

    <div class="popup__layer" tabindex="-1" data-micromodal-close>

        <!-- [3] -->
        <div role="dialog" aria-modal="true">

            <div class="popup__auth">
                <div class="popup__auth_hi">Здравствуйте!</div>
                <div class="popup__auth_title">
                    Войдите в личный кабинет
                </div>

                <form class="popup__auth_form">
                    <div class="popup__auth_form_item mail">
                        <label>
                            E-Mail
                            <div class="inp">
                                <input type="email" placeholder="e.g.: elonmusk@mars.com ">
                            </div>
                        </label>
                    </div>

                    <div class="popup__auth_form_item pass">
                        <label>
                            Ваш пароль
                            <div class="inp">
                                <input type="password" placeholder="e.g.: X Æ A-12 ">
                            </div>
                        </label>
                    </div>

                    <div class="popup__auth_form_btn">
                        <button class="btn">Войти</button>
                    </div>
                </form>

                <div class="popup__auth_ex">
                    Нет аккаунта?
                    <button id="regButton">Зарегистрироваться →</button>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="popup" id="signin" aria-hidden="true">

    <div class="popup__layer" tabindex="-1" data-micromodal-close>

        <!-- [3] -->
        <div role="dialog" aria-modal="true">

            <div class="popup__auth">
                <div class="popup__auth_hi">Здравствуйте!</div>
                <div class="popup__auth_title">
                    Зарегистрируйтесь,что бы войти в личный кабинет
                </div>

                <form class="popup__auth_form">
                    <div class="popup__auth_form_item mail">
                        <label>
                            E-Mail
                            <div class="inp">
                                <input type="email" placeholder="e.g.: elonmusk@mars.com ">
                            </div>
                        </label>
                    </div>

                    <div class="popup__auth_form_item pass">
                        <label>
                            Ваш пароль
                            <div class="inp">
                                <input type="password" placeholder="e.g.: X Æ A-12 ">
                            </div>
                        </label>
                    </div>

                    <div class="popup__auth_form_btn">
                        <button class="btn">Зарегистрироваться</button>
                    </div>
                </form>

                <div class="popup__auth_ex">
                    Есть аккаунт?
                    <button id="logButton">Войти →</button>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="popup" id="review" aria-hidden="true">

    <div class="popup__layer" tabindex="-1" data-micromodal-close>

        <!-- [3] -->
        <div role="dialog" aria-modal="true">

            <div class="popup__review">

                <div class="popup__review_title">
                    Оставить отзыв
                </div>

                <form action="{% url 'product:add_review' product.pk %}" enctype="multipart/form-data" method="post" class="popup__review_form">
                    {% csrf_token %}
                    <div class="item">
                        <label>Ваше имя
                            <input name="name" type="text" placeholder="Иван">
                        </label>
                    </div>

                    <div class="item">
                        <label>Ваша почта
                            <input name="email" type="email" placeholder="inbox@inbox.com">
                        </label>
                    </div>

                                <div class="item stars">
                                  <div class="item__title">Ваша оценка</div>
                                  <div class="item__stars" data-total-value="0">
<!--                                    <input type="radio" name="rating" value="rating" data-item-value="rating">-->
<!--                                    <input type="radio">-->
<!--                                    <input type="radio">-->
<!--                                    <input type="radio">-->
<!--                                    <input type="radio">-->
<!--                                    <div class="item__stars_el" name="rating" data-item-value="5">	&#9733;</div>-->
<!--                                    <div class="item__stars_el" data-item-value="4">	&#9733;</div>-->
<!--                                    <div class="item__stars_el" data-item-value="3">	&#9733;</div>-->
<!--                                    <div class="item__stars_el" data-item-value="2">	&#9733;</div>-->
<!--                                    <div class="item__stars_el" data-item-value="1">	&#9733;</div>-->
                                      <fieldset class="rating2">
                                        <input type="radio" id="star5" name="rating" value="5" /><label class = "full" for="star5" title="Awesome - 5 stars"></label>
                                        <input type="radio" id="star4half" name="rating" value="4.5" /><label class="half" for="star4half" title="Pretty good - 4.5 stars"></label>
                                        <input type="radio" id="star4" name="rating" value="4" /><label class = "full" for="star4" title="Pretty good - 4 stars"></label>
                                        <input type="radio" id="star3half" name="rating" value="3.5" /><label class="half" for="star3half" title="Meh - 3.5 stars"></label>
                                        <input type="radio" id="star3" name="rating" value="3" /><label class = "full" for="star3" title="Meh - 3 stars"></label>
                                        <input type="radio" id="star2half" name="rating" value="2.5" /><label class="half" for="star2half" title="Kinda bad - 2.5 stars"></label>
                                        <input type="radio" id="star2" name="rating" value="2" /><label class = "full" for="star2" title="Kinda bad - 2 stars"></label>
                                        <input type="radio" id="star1half" name="rating" value="1.5" /><label class="half" for="star1half" title="Meh - 1.5 stars"></label>
                                        <input type="radio" id="star1" name="rating" value="1" /><label class = "full" for="star1" title="Sucks big time - 1 star"></label>
                                        <input type="radio" id="starhalf" name="rating" value="0.5" /><label class="half" for="starhalf" title="Sucks big time - 0.5 stars"></label>
                                    </fieldset>
                                  </div>
                                </div>

                    <div class="item">
                        <div class="item__title">Расскажите подробнее</div>
                        <div class="item__field">
                            <textarea name="comments" placeholder="Поделитесь мнением о вашей покупке"></textarea>
                            <div class="item__field_up">
                                <input id="file" name="image" type="file" accept="image/jpeg">
                                <label for="file">
                                    <img src="{% static './img/file.svg' %}" alt="">
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <button>Оставить отзыв</button>
                    </div>
                </form>

            </div>

        </div>
    </div>
</div>

<!--dont-->
<div class="popup" id="dont-review" aria-hidden="true">

    <div class="popup__layer" tabindex="-1" data-micromodal-close>

        <!-- [3] -->
        <div role="dialog" aria-modal="true">

            <div class="popup__review">

                <div class="popup__review_title">
                    Вы не можете оставить отзыв
                </div>
                <h3>Для того что бы оставить отзыв вы должны купить этот продукт</h3>
            </div>

        </div>
    </div>
</div>
<!--dont-->
<div class="popup" id="city" aria-hidden="true">

    <div class="popup__layer" tabindex="-1" data-micromodal-close>

        <!-- [3] -->
        <div role="dialog" aria-modal="true">

            <div class="popup__city">
                <h2 class="popup__city_title">
                    Выберите город
                </h2>
                <form class="popup__city_form">
                    <div class="popup__city_search">
                        <select class="popup__city_search_select">
                            <option value="Москва">Москва</option>
                            <option value="Санкт-Петербург">Санкт-Петербург</option>
                            <option value="Екатеринбург">Екатеринбург</option>
                        </select>
                    </div>
                    <button class="popup__city_btn">Сохранить</button>
                </form>

            </div>

        </div>
    </div>
</div>
<div class="popup" id="map-p" aria-hidden="true">

    <div class="popup__layer" tabindex="-1" data-micromodal-close>

        <!-- [3] -->
        <div role="dialog" aria-modal="true">

            <div class="map">
                <div class="map_wr">
                    <h2 class="map__head">
                        Введите адрес
                    </h2>
                    <form class="map__form">
                        <div class="map__form_search">
                            <input required class="map__form_search_input" type="text" id="suggest">
                            <button type="button" class="map__form_search_btn" type="submit" id="button">Найти</button>
                        </div>
                        <p class="map__form_notice" id="notice">Адрес не найден</p>
                        <div class="map__form_map" id="map">

                        </div>
                    </form>
                </div>

                <div class="popup__adress">

                    <div id="street-point" class="popup__adress_head dsbl">
                        Улица
                    </div>

                    <div class="popup__adress_scdr dsbl"><span id="city-point">Город</span>, <span id="country-point">Страна</span>
                    </div>

                    <form id="mapForm" class="popup__adress_form">
                        <div class="popup__adress_form_main">
                            <div class="popup__adress_form_main_head">
                                <div class="name">Квартира/Офис</div>
                                <label>
                                    <input disabled type="checkbox" class="mapInput">
                                    Частный дом
                                </label>
                            </div>
                            <div class="popup__adress_form_main_input">
                                <input disabled required type="text" class="mapInput">
                            </div>
                        </div>

                        <div class="popup__adress_form_ex">
                            <div class="popup__adress_form_ex_head">
                                Укажите дополнительную информацию для курьера
                            </div>
                            <div class="popup__adress_form_ex_wr">
                                <div class="item">
                                    <input disabled required type="text" placeholder="Укажите подъезд" class="mapInput">
                                </div>
                                <div class="item">
                                    <input disabled required type="text" placeholder="Домофон" class="mapInput">
                                </div>
                                <div class="item">
                                    <input disabled required type="text" placeholder="Этаж" class="mapInput">
                                </div>
                            </div>
                        </div>

                        <div class="popup__adress_form_btn">
                            <button disabled>Выбрать</button>
                        </div>
                    </form>

                </div>
            </div>


        </div>
    </div>
</div>
<script>
    function add_to_object(element, pk) {
        $.getJSON('/products/' + "cart/" + pk, function (data) {
            if (!data.status) {
               $('#message').append(`<div style="padding:5px">
                        <div id="inner-message" class="alert alert-error">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            Error
                        </div>
                    </div>`);
            } else {
                if (data.added) {
                    $('#message');
                    element.innerHTML = '<button type="submit" class="order__price_add btn orange-1">Добавлено в корзину</button>'
                } else {
                    $('#message');
                     element.innerHTML = '<button type="submit" class="order__price_add btn">Добавить в корзину</button>'
                }
                  $('#cart_count').html(data.cart_len);
            }
        });
    }
</script>
{% endblock %}